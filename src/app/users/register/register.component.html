<div class="register-container">
    <div class="main-container">
        <a [routerLink]="['/login']" class="back-to-login"> <i class="material-icons">chevron_left</i> Voltar para o
            login</a>
        <h1 class="page-title">Cadastro</h1>

        <form [formGroup]="formRegister" (ngSubmit)="onSubmit(formRegister)" autocomplete="off">
            <div class="row">
                <div class="block-group  margin-t-40 col-md-6">
                    <h3 class="form-title">Dados gerais</h3>
                    <p class="form-subtitle">Insira os dados para o seu perfil.</p>
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label for="name">Nome</label>
                                <input type="text"
                                    [ngClass]="{'is-invalid': formRegister.get('name').errors && formRegister.get('name').touched }"
                                    formControlName="name" class="form-control" id="name" placeholder="Digite seu nome">
                            </div>
                            <div class="form-group">
                                <label for="email">E-mail</label>
                                <input type="text"
                                    [ngClass]="{'is-invalid': formRegister.get('email').errors && formRegister.get('email').touched }"
                                    formControlName="email" class="form-control" id="email"
                                    placeholder="Digite seu e-mail">
                            </div>
                            <div class="form-group">
                                <label for="telephone">Telefone</label>
                                <input type="text"
                                    [ngClass]="{'is-invalid': formRegister.get('telephone').errors && formRegister.get('telephone').touched }"
                                    formControlName="telephone"
                                    value="{{formRegister.get('telephone').value | telephone}}" class="form-control"
                                    id="telephone" maxlength="15" placeholder="Digite seu telefone">
                            </div>
                            <div class="form-group">
                                <label for="lotacao_id">Lotação</label>
                                <select name="lotacao_id" formControlName="lotacao_id"
                                    (change)="getGeneralManagement(); getSector()"
                                    [ngClass]="{'is-invalid': formRegister.get('lotacao_id').errors && formRegister.get('lotacao_id').touched }"
                                    class="form-control" id="lotacao_id">
                                    <option value="">Selecione a lotação</option>
                                    <option *ngFor="let item of optionLotacao" [value]="item.id">
                                        {{item.nome}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="block-group  margin-t-40 col-md-6">
                    <h3 class="form-title">Conta</h3>
                    <p class="form-subtitle">Insira suas credenciais para ter acesso ao sistema.</p>
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label for="username">Usuário</label>
                                <input type="text"
                                    [ngClass]="{'is-invalid': formRegister.get('username').errors && formRegister.get('username').touched }"
                                    formControlName="username" class="form-control" id="username"
                                    placeholder="Digite seu nome">
                            </div>
                            <div class="form-group">
                                <label for="password">Senha</label>
                                <input type="password"
                                    [ngClass]="{'is-invalid': formRegister.get('password').errors && formRegister.get('password').touched }"
                                    formControlName="password" class="form-control" id="password"
                                    placeholder="Digite seu e-mail">
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Confirmar senha</label>
                                <input type="password"
                                    [ngClass]="{'is-invalid': formRegister.get('confirmPassword').errors && formRegister.get('confirmPassword').touched }"
                                    formControlName="confirmPassword" class="form-control" id="confirmPassword"
                                    placeholder="Digite seu e-mail" (blur)="matchValues(formRegister)">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="" *ngIf="formRegister.get('lotacao_id').value == '1'">
                <div class="row">
                    <div class="block-group  margin-t-40 col-md-6">
                        <h3 class="form-title">Gerencias gerais</h3>
                        <p class="form-subtitle">Preencha os dados abaixo.</p>
                        <div class="card">
                            <div class="card-body">
                                <label for="">Gerencia Geral</label>
                                <select name="gerencia_geral_id" formControlName="gerencia_geral_id"
                                    class="form-control" (change)="getManagements()"
                                    [ngClass]="{'is-invalid': formRegister.get('gerencia_geral_id').errors && formRegister.get('gerencia_geral_id').touched }">
                                    <option value="">Selecione a gerencia geral</option>
                                    <option *ngFor="let item of optionGeneralManagement" [value]="item.id">
                                        {{item.sigla}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="block-group  margin-t-40 col-md-6">
                        <h3 class="form-title">Gerencias</h3>
                        <p class="form-subtitle">Preencha os dados abaixo.</p>
                        <div class="card">
                            <div class="card-body">
                                <label for="">Gerencia</label>
                                <ng2-selectize formControlName="gerencia_id"
                                    [ngClass]="{'is-invalid': formRegister.get('gerencia_id').errors && formRegister.get('gerencia_id').touched }"
                                    class="selectize-regional" [config]="configManagement" [options]="optionManagement">
                                </ng2-selectize>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row" *ngIf="permissionManagements">
                    <div class="block-group  margin-t-40 col-md-6">
                        <h3 class="form-title">Divisão</h3>
                        <p class="form-subtitle">Selecione sua divisão</p>
                        <div class="card">
                            <div class="card-body">
                                <label for="divisao_id">Divisão</label>
                                <select name="divisao_id" formControlName="divisao_id" class="form-control"
                                    id="divisao_id"
                                    [ngClass]="{'is-invalid': formRegister.get('divisao_id').errors && formRegister.get('divisao_id').touched }">
                                    <option value="">Selecione a divisão</option>
                                    <option *ngFor="let item of optionDivisions" [value]="item.id">
                                        {{item.sigla}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>


                    <div class="block-group  margin-t-40 col-md-6">
                        <h3 class="form-title">Equipe de relacionamento</h3>
                        <p class="form-subtitle">Preencha os dados abaixo.</p>
                        <div class="card">
                            <div class="card-body" formGroupName="relacionamento">
                                <!-- <div *ngIf="!formRegister.get('relacionamento.check_relacionamento_setorial').value">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input"
                                            formControlName="check_relacionamento" id="relacionamento">
                                        <label class="form-check-label" for="relacionamento">Equipe de
                                            relacionamento</label>
                                    </div>

                                    <div class="form-group margin-t-20"
                                        *ngIf="formRegister.get('relacionamento.check_relacionamento').value">
                                        <label for="">Regional</label>
                                        <ng2-selectize formControlName="regionais"
                                            [ngClass]="{'is-invalid': formRegister.get('relacionamento.check_relacionamento').errors && formRegister.get('relacionamento.check_relacionamento').touched }"
                                            class="selectize-regional" [config]="configRegional"
                                            [options]="optionRegional">
                                        </ng2-selectize>
                                    </div>
                                    <div class="form-group"
                                        *ngIf="formRegister.get('relacionamento.check_relacionamento').value">
                                        <label for="">Sindicatos</label>
                                        <ng2-selectize formControlName="sindicatos" #selectizeSindicato
                                            class="selectize-sindicato" [config]="configSindicato"
                                            [options]="optionsSindicatos">
                                        </ng2-selectize>
                                    </div>
                                </div> -->
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input"
                                        formControlName="check_relacionamento_setorial" id="relacionamento_setorial">
                                    <label class="form-check-label" for="relacionamento_setorial">Equipe de
                                        relacionamento setorial</label>
                                </div>

                                <div class=" margin-t-20"
                                    *ngIf="formRegister.get('relacionamento.check_relacionamento_setorial').value">
                                    <label for="">Setores</label>
                                    <ng2-selectize formControlName="setores_sindicato" #selectizeSector
                                        class="selectize-setor" [config]="configUnionsSectors"
                                        [options]="optionsUnionsSectors">
                                    </ng2-selectize>
                                </div>

                                <div class="form-group"
                                    *ngIf="formRegister.get('relacionamento.check_relacionamento_setorial').value">
                                    <label for="">Sindicatos</label>
                                    <ng2-selectize formControlName="sindicatos" #selectizeSindicato
                                        class="selectize-sindicato" [config]="configSindicato"
                                        [options]="optionsSindicatos">
                                    </ng2-selectize>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row"
                *ngIf="formRegister.get('lotacao_id').value && formRegister.get('lotacao_id').value !== '1'">
                <div class="block-group  margin-t-40 col-md-6">
                    <h3 class="form-title">Representante Regional</h3>
                    <p class="form-subtitle">Se você for representante de uma regional, preencha os dados abaixo.</p>
                    <div class="card">
                        <div class="card-body">
                            <div *ngFor="let cargo of cargos; index as i;" class="margin-b-20">
                                <div class="card text-white bg-primary mb-3">
                                    <div class="card-body margin-t-none">
                                        <div class="form-group">
                                            <label for="" class="text-white">Regional</label>
                                            <input type="text" value="{{cargo.regional.nome}}" class="form-control"
                                                readonly>
                                        </div>
                                        <div class="form-group">
                                            <label for="" class="text-white">Cargo</label>
                                            <input type="text" value="{{cargo.cargo.nome}}" class="form-control"
                                                readonly>
                                        </div>

                                        <div class="text-right">
                                            <button type="button" class="btn btn-link btn-card  text-white border-light"
                                                (click)="removeOffice(i)">remover</button>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div formGroupName="representante_regional" *ngIf="permissionOffice">
                                <div class="form-group">
                                    <label for="representante_regional">Regional</label>
                                    <select name="representante_regional"
                                        [ngClass]="{'is-invalid': formRegister.get('representante_regional.regional').errors && formRegister.get('representante_regional.regional').touched }"
                                        formControlName="regional" [(ngModel)]="selectRegional" class="form-control"
                                        id="representante_regional">
                                        <option *ngFor="let item of optionRegional" value="{{item.id}}">
                                            {{item.nome}}
                                        </option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="cargo_representante">Cargo</label>
                                    <select name="cargo_representante"
                                        [ngClass]="{'is-invalid': formRegister.get('representante_regional.cargo').errors && formRegister.get('representante_regional.cargo').touched }"
                                        formControlName="cargo" [(ngModel)]="selectCargo" class="form-control"
                                        id="cargo_representante">
                                        <option *ngFor="let item of optionCargos; trackBy: trackByFn"
                                            value="{{item.id}}">
                                            {{item.nome}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="card-footer text-center" *ngIf="permissionOffice">
                            <button type="button" class="btn btn-link btn-card"
                                (click)="selectRegional && selectCargo ? addOffice([selectRegional, selectCargo]) : null">
                                Adicionar cargo
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group margin-t-50 text-right">
                <button type="submit" class="btn btn-primary btn-lg">Cadastrar</button>
            </div>
        </form>
    </div>
</div>